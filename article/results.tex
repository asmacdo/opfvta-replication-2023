\section{Results}
% What we accomplihesd, everything which we created, invented, etc. should preferentially go here.
% Descriptive, opinions either absent, or as objective-ish comments when facts are stated.
% Should, could, might, etc. sparingly and ideally not here but in discussion.

\subsection{Repository Structure}
In order to improve the reexecution reliability of the OPVFTA article we have constructed a parent repository which leverages Git to link all reexecution requirements.
This framework leverages Git submodules for resource referencing, and datalad \cite{datalad} in order to permit Git integration with data resources.

These resources include the original article, the raw data it operates on, and a reference mouse brain templates package, as submodules.
Additionally, it directly tracks the code required to coordinate the OPFVTA article reexecution and subsequent generation of \emph{this} article.
The code unique to the reexecution framework consists of container image generation and container execution instructions, and a Make system for process coordination (\cref{fig:topology}).

The Make system is structured into a top-level Makefile, which can be used for container image regeneration and upload, article reexecution in a containerized environment, and meta-article production.
Two article regeneration Make targets exist, for both the Open Container Initiative standard, and Singularity.
Both article reexecution targets wrap the \texttt{produce\_analysis.sh} script, which is a thing compatibility layer accessing the Make system of the original article.
The meta-article targets redirect to a Makefile in the \texttt{article/} child directory, which contains this document's human-readable text in \TeX format, alongside scripts for generating dynamical elements based on the reexecution results seen in the \texttt{outputs/} directory.

% Can we get a DOI/ISBN for the following YODA reference? https://handbook.datalad.org/en/latest/basics/101-127-yoda.html
The layout constructed for this study thus provides robust provenance tracking and constitutes an instantiation of the YODA principle (a recursive acronym for “YODAs Organigram on Data Analysis”).

\begin{figure}
	\centering
	\includegraphics[clip,width=0.99\textwidth]{figs/topology.pdf}
	\caption{
		\textbf{The directory topology of the reexecution framework nests all requirements and includes a Make system for process coordination.}
		Depicted is a directory tree topology of the repository coordinating OPFVTA re-execution.
		Nested directories are represented by nested boxes, and Git submodules are highlighted with orange borders.
		The article reexecution PDF results are highlighted in light green, and the PDF of the resulting meta-article (i.e. this article) is highlighted in light blue.
	}
	\label{fig:topology}
\end{figure}

Notably, this repository structure diverges from the original reference article in directly linking the data at the repository level, as opposed to relying on its installation via the package manager.
Within the context of container usage, this affords the advantage of keeping the data packages separate and not adding their disk space requirements to those of the container image.


In this novel repository structure, external components of the reexecution study are managed as Git submodules, with data sumbodules being handled by git-annex, a versioning technology suitable for binary files, and made accessible via DataLad.
Notably, the article source code itself is not duplicated or furhter edited here, but handled as a Git submodule itself, with all proposed improvements being recorded in the original upstream repostitory.

%TODO: Something *descriptive* about how this new layout allows for more of a plug-in structure.

\subsection{Resource Refinement}

As a notable step in our automated full article reproduction effort, we have updated resources previously only available as tarballs (i.e. compressed \texttt{tar} archives), to DataLad.
This refinement permits both easier integration with the parent article reproduction repository for version tracking purposes.
In particular, our work encompassed the re-write of the Mouse Brain Templates package \cite{mbt05}  `Make` system.
In its new release \cite{mbt10}, developed as part of this study, Mouse Brain Templates now publishes tarballs, as well as DataLad-accessible unarchived individual template files.

\subsection{Best Practice Guidelines}

\texttt{set -eu} is an invaluable


\section{Reproduction}

% TODO - make proper latex etc:
%  Additional aspects which were not foreseeing in the original execution making it impossible to reexecute to the identical result - no randomization seed was provided or recorded.


\begin{figure}
	\centering
	\includegraphics[clip,width=0.99\textwidth]{figs/diff_pages.pdf}
	\caption{
		\textbf{Page-wise visual differences between the Historical Manuscript Record and the Novel Workflow Reexecution help identify overall reproduction fidelity, and identify pages with noteworthy differences.}
		Depicted are rasterized document differences, weighted 1 for changes in any pixel color channel, and rounded to four decimal points.
		The scale is logarithmic, and the hue color map is linear.
	}
	\label{fig:diff_pages}
\end{figure}

We compare the difference between the Historical Manuscript Record — a product of the original executable article generation — and the Novel Workflow Reexecution.
Reproduction differences between the article versions can best be inspected at a glance by evaluating the page-wise PDF difference (\ref{fig:diff_pages}).
This overview shows a consistent minimum baseline of differences, around $10^{-4}$ (i.e. \SI{0.01}{\percent}), best seen in pages 6 to 9.
When examined closely (\ref{fig:diff_date}), this difference corresponds to the modified date of the Historical Manuscript Record (2022-07-25) and the Novel Workflow Reexecution (2023-..).
While otherwise inconsequential, this difference provides a good litmus test for whether the article was indeed reexecuted or simply preserved, and should be expected throughout all comparisons.
The perceptually uniform linear colour map of \cref{fig:diff_pages} further indicates a natural categorization of pages by difference — orange as opposed to purple ranges.
Upon inspection these categories reveal themselves as corresponding to text differences (orange, e.g. the aforementioned \cref{fig:diff_date} and \cref{fig:diff_text}) and image differences (purple, e.g. \cref{fig:diff_fig}).

We individually examined the highest-difference pages in both categories, 4 and 14, and showcase excerpts of article elements driving the difference in \cref{fig:diff_text} and \cref{fig:diff_fig}, respectively.
Notably, we find that text differences are well localized, as a function of fixed decimal rounding for statistical outputs, whereby changes in the value do not significantly impact text length and do not get recorded as false positives on subsequent lines.
In particular, this is also true for p-values, the magnitude of which can vary substantially at the lower tail of the distribution without impacting qualitative statements, as long as magnitude notation is used.


Overall, inspecting the differences reveals a strong coherence at the qualitative but not at the quantitative level.
This coherence manifests in the statements from the original article remaining valid with regard to statistical summaries which emerge from  \textit{de novo} data processing (as seen in \ref{fig:diff_text}, \ref{fig:diff_fig}).
Quantitative incoherence is in the form of numerical variability of automatically generated metrics in the article text (\ref{fig:diff_text}), variability of sample distributions (\ref{fig:diff_fig}), as well as expected and predictable metadata changes (\ref{fig:diff_date}).


\begin{figure}
	\centering
	\begin{subfigure}{0.99\textwidth}
		\centering
		\tcbox{
			\includegraphics[width=0.48\textwidth]{figs/diff_date.pdf}
			}
		\caption{
			The date change is correctly identified throughout the document, as seen in this example from page 1 of the article.
		}
		\label{fig:diff_date}
	\end{subfigure}
	\\
	\begin{subfigure}{0.99\textwidth}
		\centering
		\tcbox{
			\includegraphics[width=0.48\textwidth]{figs/diff_text.pdf}
			}
		\caption{
			Statistical summary values change, but maintain qualitative evaluation bracket with respect to e.g. p-value thresholds, as seen in this example from page 4 of the article.
		}
		\label{fig:diff_text}
	\end{subfigure}
	\\
	\vspace{1em}
	\begin{subfigure}{0.99\textwidth}
		\centering
		\tcbox{
			\includegraphics[width=0.8\textwidth]{figs/diff_fig.pdf}
			}
		\caption{
			In regression analysis, data points are highly variable, yet maintain a consistent slope and significance, as seen in this example from page 14 of the article.
		}
		\label{fig:diff_fig}
	\end{subfigure}
	\caption{
		\textbf{The article difference showcases expected quantitative and metadata variability, while maintaining overall validity of qualitative statements.}
		The figures are extracted from a full article \texttt{diff}, with hue-shifted highlighting (red for the Historical Manuscript Record, and blue for the Novel Workflow Reexecution).
	}
	\label{fig:diff}
\end{figure}


